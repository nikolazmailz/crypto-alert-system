# [ADR-001] Использование реактивного стека (Spring WebFlux + Coroutines)

**Status:** Accepted
**Date:** 2024-02-18
**Author:** ...

## Context
Система должна обрабатывать потоковые данные о курсах валют в реальном времени. Традиционный блокирующий подход (Thread-per-request) в Spring MVC может привести к исчерпанию пула потоков при ожидании ответов от внешних API (Binance/CoinGecko) или БД.

## Decision
Мы выбираем **Spring WebFlux** в связке с **Kotlin Coroutines**.
Для работы с БД используем **R2DBC** и нативный **DatabaseClient** (отказ от ORM Hibernate).

## Consequences
**Плюсы:**
* Высокая эффективность использования ресурсов (малое количество потоков ОС).
* Coroutines позволяют писать асинхронный код в императивном стиле (без callback hell).
* Нативный SQL в DatabaseClient дает полный контроль над запросами.

**Минусы:**
* Нельзя использовать блокирующие библиотеки (JDBC драйверы).
* Повышенный порог входа (нужно понимать Event Loop).
* Отладка (Stack traces) сложнее, чем в блокирующем коде.
